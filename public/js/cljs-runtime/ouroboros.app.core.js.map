{"version":3,"sources":["ouroboros/app/core.cljs"],"mappings":";AAaA,GAAA,QAAAA,sCAAAC,0CAAAC,+CAAAC;AAAA;AAAA,AAAA,AAASC,6BAAQ,gDAAA,2CAAA,oDAAA,/IAACC;;AAElB,gCAAA,hCAAMC;AAAN,AAAA,0FAAA,mDAAA,mFAAA,8CAAA;;AAIA,2BAAA,2CAAA,oDAAA,oEAAA,AAAA,yGAAA,wCAAA,gDAAA,qDAAA,sDAAA,iEAAA,yDAAA,oDAAA,6DAAA,6DAAA,mDAAA,sDAAA,AAAA,iGAAA,AAAA,yDAAA,AAAA,gCAAA,AAAA,GAAA,AAAA,EAAA,AAAA,GAAA,AAAA,GAAA,AAAA,iDAAA,AAAA,KAAA,kBAAAC,+BAAA,AAAA,AAAAA,6CAAA,SAAA,uDAAA,oEAAA,AAAA,wGAAA,wCAAA,gDAAA,qDAAA,sDAAA,iEAAA,yDAAA,oDAAA,6DAAA,6DAAA,mDAAA,sDAAA,AAAA,qFAAA,AAAA,qEAAA,AAAA,0BAAA,AAAA,GAAA,AAAA,EAAA,AAAA,GAAA,AAAA,GAAA,AAAA,iDAAA,AAAA,KAAA,kBAAAD,+BAAA,AAAA,AAAAA,6CAAA,v2EAAKE;AAIL,0BAAA,1BAAMC;AAAN,AAAA,0FACG,iBAAAC,WAAO,AAAA,kFAAA,AAAAC,gBAAQP;AAAf,AAAA,wHAAAM,+CAAAA,/JAACF,yDAAAA,mEAAAA;;;AAEJ,AAAKI,4BACH,iDAAA,mFAAA,mFAAA,IAAA,4DAAA,mFAAA,SAAA,nXAACC;AAIH,iCAAA,jCAAMC,0EAAaC;AAAnB,AACE,OAAA,mFAAA,AAAA,uIAAK,iBAAAC,mBAAI,AAACC,oBAAU,2BAAA,OAAA,lCAACC,uBAAeH,nIAC/B,AAACI,0BAAqBP;AADtB,AAAA,oBAAAI;AAAAA;;AAAA;;;;AAKP,mDAAA,nDAAMI;AAAN,AACE,IAAAC,WAAM,KAAAC;AAAN,AAAA,mBAAAD,nBACGE,4BACAC,gCACA,WAAqBC;AAArB,AACE,qGAAA,9FAACC,mDAAMtB,2BAAQuB,oEAAY,AAACb,+BAAY,AAASW;;;AAJtD,AAAAJ,oBAAA;;AAAAA;;AAOF,sCAAA,tCAAuBO;AAAvB,AACE,wDAAA,mFAAA,8DAAA,AAAA,6FAAA,wCAAA,gDAAA,qDAAA,sDAAA,iEAAA,yDAAA,oDAAA,6DAAA,6DAAA,mDAAA,sDAAA,AAAA,qFAAA,AAAA,0DAAA,AAAA,0BAAA,AAAA,GAAA,AAAA,EAAA,AAAA,GAAA,AAAA,GAAA,AAAA,iDAAA,AAAA,KAAA,kBAAAnB,yBAAA,AAAA,AAAAA,uCAAA,/qCAACoB,gsCAAqB,wBAAA,xBAAiBC;;AAOzC,0BAAA,1BAAMC;AAAN,AACE,AAACX;;AACD,OAACQ","names":["js/ouroboros","js/ouroboros.app","js/ouroboros.app.core","js/ouroboros.app.core.session","ouroboros.app.core/session","reagent.core.atom","ouroboros.app.core/about-page","ouroboros.app.pages.home/main","ouroboros.app.core/pages","ouroboros.app.core/page","G__24750","cljs.core/deref","ouroboros.app.core/router","reitit.core.router","ouroboros.app.core/match-route","uri","or__5045__auto__","cljs.core/not-empty","clojure.string/replace","reitit.core/match-by-path","ouroboros.app.core/hook-browser-navigation!","G__24751","js/goog.History","goog.events/listen","goog.history.EventType/NAVIGATE","event","cljs.core.swap_BANG_","cljs.core/assoc","ouroboros.app.core/mount-components","reagent.dom.render","js/document","ouroboros.app.core/init"],"sourcesContent":["(ns ouroboros.app.core\n  (:require   [reagent.core :as r]\n              [reagent.dom :as rdom]\n              [goog.events :as events]\n              [goog.history.EventType :as HistoryEventType]\n              [ajax.core :refer [GET POST]]\n              [reitit.core :as reitit]\n              [clojure.string :as string]\n              [ouroboros.app.db :as db]\n              [ouroboros.app.pages.home :as home])\n\n  (:import goog.History))\n\n(defonce session (r/atom {:page :home}))\n\n(defn about-page []\n  [:div [:p \"dfas====about-page\"]])\n\n\n(def pages\n  {:home #'home/main\n   :about #'about-page})\n\n(defn page []\n  [(pages (:page @session))])\n\n(def router\n  (reitit/router\n   [[\"/\" :home]\n    [\"/about\" :about]]))\n\n(defn match-route [uri]\n  (->> (or (not-empty (string/replace uri #\"^.*#\" \"\")) \"/\")\n       (reitit/match-by-path router)\n       :data\n       :name))\n\n(defn hook-browser-navigation! []\n  (doto (History.)\n    (events/listen\n     HistoryEventType/NAVIGATE\n     (fn [^js/Event.token event]\n       (swap! session assoc :page (match-route (.-token event)))))\n    (.setEnabled true)))\n\n(defn ^:dev/after-load mount-components []\n  (rdom/render [#'page] (.getElementById js/document \"app\")))\n\n\n;; (db/transact [{:scene/id \"000\"}])\n;; (println (db/q '[:find [(pull ?e [*])]\n;;                  :where [?e :scene/id]]))\n\n(defn init []\n  (hook-browser-navigation!)\n  (mount-components))\n"]}